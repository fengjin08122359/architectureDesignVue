import"axios";import e from"vue";import t from"element-ui";import{Prop as i,Component as r,Vue as s,Watch as a}from"vue-property-decorator";class l{constructor(){this.datas=[]}add(e){this.datas.push(e)}remove(e){this.datas=this.datas.filter(t=>t.name!==e)}clear(){this.datas=[]}get(e=""){return this.datas.filter(t=>""===e||t.name===e)}find(e=""){var t=this.datas.find(t=>t.name===e),i=this.datas.find(e=>""===e.name);return t?t.data:i?i.data:null}}let o=(e,t="px")=>"number"==typeof e?e+t:e,n=e=>"number"==typeof e?e:void 0===e||"auto"==e?0:e.indexOf("px")>-1?parseFloat(e):e.indexOf("%")>-1||isNaN(parseFloat(e))?e:parseFloat(e),p=()=>{var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))},d="alignContent,alignItems,alignSelf,alignmentBaseline,all,animation,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationTimingFunction,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundRepeatX,backgroundRepeatY,backgroundSize,baselineShift,blockSize,border,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInlineEnd,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,bufferedRendering,captionSide,caretColor,clear,clip,clipPath,clipRule,color,colorInterpolation,colorInterpolationFilters,colorRendering,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,content,counterIncrement,counterReset,cursor,cx,cy,d,direction,display,dominantBaseline,emptyCells,fill,fillOpacity,fillRule,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,floodColor,floodOpacity,font,fontDisplay,fontFamily,fontFeatureSettings,fontKerning,fontOpticalSizing,fontSize,fontStretch,fontStyle,fontVariant,fontVariantCaps,fontVariantEastAsian,fontVariantLigatures,fontVariantNumeric,fontVariationSettings,fontWeight,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,height,hyphens,imageOrientation,imageRendering,inlineSize,isolation,justifyContent,justifyItems,justifySelf,left,letterSpacing,lightingColor,lineBreak,lineHeight,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlockEnd,marginBlockStart,marginBottom,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marker,markerEnd,markerMid,markerStart,mask,maskType,maxBlockSize,maxHeight,maxInlineSize,maxWidth,maxZoom,minBlockSize,minHeight,minInlineSize,minWidth,minZoom,mixBlendMode,objectFit,objectPosition,offset,offsetDistance,offsetPath,offsetRotate,opacity,order,orientation,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowWrap,overflowX,overflowY,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,quotes,r,resize,right,rowGap,rx,ry,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockEnd,scrollMarginBlockStart,scrollMarginBottom,scrollMarginInline,scrollMarginInlineEnd,scrollMarginInlineStart,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockEnd,scrollPaddingBlockStart,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineEnd,scrollPaddingInlineStart,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapStop,scrollSnapType,shapeImageThreshold,shapeMargin,shapeOutside,shapeRendering,size,speak,src,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,tabSize,tableLayout,textAlign,textAlignLast,textAnchor,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkipInk,textDecorationStyle,textIndent,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlinePosition,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,unicodeBidi,unicodeRange,userSelect,userZoom,vectorEffect,verticalAlign,visibility,webkitAlignContent,webkitAlignItems,webkitAlignSelf,webkitAnimation,webkitAnimationDelay,webkitAnimationDirection,webkitAnimationDuration,webkitAnimationFillMode,webkitAnimationIterationCount,webkitAnimationName,webkitAnimationPlayState,webkitAnimationTimingFunction,webkitAppRegion,webkitAppearance,webkitBackfaceVisibility,webkitBackgroundClip,webkitBackgroundOrigin,webkitBackgroundSize,webkitBorderAfter,webkitBorderAfterColor,webkitBorderAfterStyle,webkitBorderAfterWidth,webkitBorderBefore,webkitBorderBeforeColor,webkitBorderBeforeStyle,webkitBorderBeforeWidth,webkitBorderBottomLeftRadius,webkitBorderBottomRightRadius,webkitBorderEnd,webkitBorderEndColor,webkitBorderEndStyle,webkitBorderEndWidth,webkitBorderHorizontalSpacing,webkitBorderImage,webkitBorderRadius,webkitBorderStart,webkitBorderStartColor,webkitBorderStartStyle,webkitBorderStartWidth,webkitBorderTopLeftRadius,webkitBorderTopRightRadius,webkitBorderVerticalSpacing,webkitBoxAlign,webkitBoxDecorationBreak,webkitBoxDirection,webkitBoxFlex,webkitBoxOrdinalGroup,webkitBoxOrient,webkitBoxPack,webkitBoxReflect,webkitBoxShadow,webkitBoxSizing,webkitClipPath,webkitColumnBreakAfter,webkitColumnBreakBefore,webkitColumnBreakInside,webkitColumnCount,webkitColumnGap,webkitColumnRule,webkitColumnRuleColor,webkitColumnRuleStyle,webkitColumnRuleWidth,webkitColumnSpan,webkitColumnWidth,webkitColumns,webkitFilter,webkitFlex,webkitFlexBasis,webkitFlexDirection,webkitFlexFlow,webkitFlexGrow,webkitFlexShrink,webkitFlexWrap,webkitFontFeatureSettings,webkitFontSizeDelta,webkitFontSmoothing,webkitHighlight,webkitHyphenateCharacter,webkitJustifyContent,webkitLineBreak,webkitLineClamp,webkitLocale,webkitLogicalHeight,webkitLogicalWidth,webkitMarginAfter,webkitMarginBefore,webkitMarginEnd,webkitMarginStart,webkitMask,webkitMaskBoxImage,webkitMaskBoxImageOutset,webkitMaskBoxImageRepeat,webkitMaskBoxImageSlice,webkitMaskBoxImageSource,webkitMaskBoxImageWidth,webkitMaskClip,webkitMaskComposite,webkitMaskImage,webkitMaskOrigin,webkitMaskPosition,webkitMaskPositionX,webkitMaskPositionY,webkitMaskRepeat,webkitMaskRepeatX,webkitMaskRepeatY,webkitMaskSize,webkitMaxLogicalHeight,webkitMaxLogicalWidth,webkitMinLogicalHeight,webkitMinLogicalWidth,webkitOpacity,webkitOrder,webkitPaddingAfter,webkitPaddingBefore,webkitPaddingEnd,webkitPaddingStart,webkitPerspective,webkitPerspectiveOrigin,webkitPerspectiveOriginX,webkitPerspectiveOriginY,webkitPrintColorAdjust,webkitRtlOrdering,webkitRubyPosition,webkitShapeImageThreshold,webkitShapeMargin,webkitShapeOutside,webkitTapHighlightColor,webkitTextCombine,webkitTextDecorationsInEffect,webkitTextEmphasis,webkitTextEmphasisColor,webkitTextEmphasisPosition,webkitTextEmphasisStyle,webkitTextFillColor,webkitTextOrientation,webkitTextSecurity,webkitTextSizeAdjust,webkitTextStroke,webkitTextStrokeColor,webkitTextStrokeWidth,webkitTransform,webkitTransformOrigin,webkitTransformOriginX,webkitTransformOriginY,webkitTransformOriginZ,webkitTransformStyle,webkitTransition,webkitTransitionDelay,webkitTransitionDuration,webkitTransitionProperty,webkitTransitionTimingFunction,webkitUserDrag,webkitUserModify,webkitUserSelect,webkitWritingMode,whiteSpace,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,x,y,zIndex,zoom".split(","),u="abort,animationcancel,animationend,animationiteration,animationstart,auxclick,blur,cancel,canplay,canplaythrough,change,click,close,contextmenu,cuechange,dblclick,drag,dragend,dragenter,dragexit,dragleave,dragover,dragstart,drop,durationchange,emptied,ended,error,focus,focusin,focusout,gotpointercapture,input,invalid,keydown,keypress,keyup,load,loadeddata,loadedmetadata,loadstart,lostpointercapture,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,pause,play,playing,pointercancel,pointerdown,pointerenter,pointerleave,pointermove,pointerout,pointerover,pointerup,progress,ratechange,reset,resize,scroll,securitypolicyviolation,seeked,seeking,select,selectionchange,selectstart,stalled,submit,suspend,timeupdate,toggle,touchcancel,touchend,touchmove,touchstart,transitioncancel,transitionend,transitionrun,transitionstart,volumechange,waiting,wheel,fullscreenchange,fullscreenerror,copy,cut,paste".split(",");class c{constructor(e){this.id=p(),this.opt=e,this.opt.id=e.id||this.id}fetch(){}setValue(e){this.opt.id=e.id||this.opt.id,this.opt.config=e.config||"get",this.opt.name=e.name||"",this.opt.getParam=e.getParam||{},this.opt.postParam=e.postParam||{}}}class h{constructor(e){this.id=e.id||p(),this.opt=e}fetch(){}setValue(e){this.opt.id=e.id||this.opt.id,this.opt.type=e.type||"EventDispatcher",this.opt.name=e.name||""}}let m=new class{constructor(){this.list=new l}add(e){var t=new c(e);return this.list.add({name:t.id||"",data:t}),t}remove(e){this.list.remove(e)}getList(){return this.list.get("").map(e=>e.data)}clear(){this.list.clear()}save(e){}},g=new class{constructor(){this.list=new l}add(e){var t=new h(e);return this.list.add({name:t.id,data:t}),t}remove(e){this.list.remove(e)}getList(){return this.list.get("").map(e=>e.data)}clear(){this.list.clear()}save(){}},v=()=>m.add({config:"get",name:"",getParam:[],postParam:[]}),b=e=>{m.remove(e)},y=()=>g.add({name:"",type:"EventDispatcher"}),k=e=>{g.remove(e)};class f{constructor(e){this.opt=e,this.id=p()}setValue(e){this.opt.tid=e.tid||""}getValue(){return this.opt}}class w{constructor(e){this.opt=e,this.id=p()}setValue(e){this.opt.tid=e.tid||"",this.opt.key=e.key||""}getValue(){return this.opt}}class x{constructor(){this.inList=new l,this.outList=new l}addIn(e){var t=new f(e||{tid:""});return this.inList.add({name:t.id,data:t}),t}addOut(e){var t=new w(e||{tid:"",key:"click"});return this.outList.add({name:t.id,data:t}),t}removeIn(e){this.inList.remove(e)}removeOut(e){this.outList.remove(e)}getInList(){return this.inList.get("").map(e=>e.data)}getOutList(){return this.outList.get("").map(e=>e.data)}clearIn(){this.inList.clear()}clearOut(){this.outList.clear()}save(){}getValue(){return{inValue:this.getInList().map(e=>e.getValue()),outValue:this.getOutList().map(e=>e.getValue())}}}class I{constructor(){this.changed=0}setKeyValue(e,t){this[e]=t,this.changed++}getValue(){return Object.assign({},this)}setValue(e){for(let[t,i]of Object.entries(e))try{this.setKeyValue(t,i)}catch(e){}}clear(){for(let e of Object.keys(this))d.find(t=>t==e)&&delete this[e]}move(e,t){var i=n(this.target.style.left)+e,r=n(this.target.style.top)+t;this.target.style.setKeyValue("left",o(i)),this.target.style.setKeyValue("top",o(r))}}class C{constructor(){this.eventBind=new x,this.style=new I,this.selfProp=new S}setSelfProp(e){this.selfProp=e}getValue(){return{eventBind:{value:this.eventBind.getValue()},selfProp:{value:this.selfProp.getValue()},style:{value:this.style.getValue()}}}}class S{constructor(){this.opt={},this.params=[]}setParam(e=[]){this.params=e}getValue(){return this.opt}setValue(e){this.opt=e||{}}}class V{constructor(){this.moduleId=p(),this.children=[],this.target=new C,this.canDrag=!0}canDragFilter(){return this.canDrag&&this.target.style.position&&("absolute"==this.target.style.position||"fixed"==this.target.style.position)}setTarget(e){this.target=e}combi(e){var t=new V;return t.setTarget(e),this.children.push(t),t}unCombi(e){var t=this.findContainUI(this,e);console.log(t),t&&(t.children=t.children.filter(t=>t.moduleId!=e))}findContainUI(e,t){if(e.children.find(e=>e.moduleId==t))return e;if(e.children.length>0){var i=null;return e.children.forEach(e=>{i=this.findContainUI(e,t)||i}),i}return null}move(e,t){this.target.style.move(e,t)}getValue(){return{moduleId:this.moduleId,canDrag:this.canDrag,target:this.target.getValue(),children:this.children.map(e=>e.getValue())}}getChildren(){return this.children}}class P extends C{constructor(){super(),this.id=p(),this.moduleIdList=[],this.editable=!0,this.insertable=!0,this.selfProp=new T}getValue(){return{typeId:this.typeId,id:this.id,insertable:this.insertable,editable:this.editable,moduleIdList:this.moduleIdList,eventBind:{value:this.eventBind.getValue()},selfProp:{value:this.selfProp.getValue()},style:{value:this.style.getValue()}}}setDom(e){this.dom=e}setId(e){this.id=e||p()}filterChildren(e){return this.moduleIdList.find(t=>t==e.moduleId)}addModuleId(e){this.moduleIdList.push(e)}removeModuleId(e){this.moduleIdList=this.moduleIdList.filter(t=>t!=e)}}class T extends S{constructor(){super()}getStyle(){return{width:100,height:100}}getRelativeStyle(){return{position:"relative",top:"auto",bottom:"auto",right:"auto",left:"auto"}}}class B extends P{constructor(){super(),this.insertable=!0}}class A extends P{constructor(){super(),this.insertable=!1}}class L extends A{constructor(){super(),this.insertable=!1}}class R extends V{constructor(){super(),this.moduleId=p(),this.children=[],this.target=new P,this.canDrag=!0}setTarget(e){this.target=e}combi(e){var t=new R;return t.setTarget(e),this.children.push(t),this.target.addModuleId(t.moduleId),t}unCombi(e){var t=this.findContainUI(this,e);console.log(t),t&&(t.target.removeModuleId(e),t.children=t.children.filter(t=>t.moduleId!=e))}findContainUI(e,t){if(e.children.find(e=>e.moduleId==t))return e;if(e.children.length>0){var i=null;return e.children.forEach(e=>{i=this.findContainUI(e,t)||i}),i}return null}resetRelativeStyle(){var e=this.target.selfProp.getRelativeStyle();for(let[t,i]of Object.entries(e))this.target.style[t]=i}getChildren(){return this.children.filter(e=>this.target.filterChildren(e))}setValue(e){}}class O extends T{constructor(){super()}getStyle(){return{width:"100%",height:"200px",background:"",display:"block",position:"relative"}}}class E extends T{constructor(){super()}getStyle(){return{width:"100%",height:"70px",background:"",display:"inline-block"}}}class M extends T{constructor(){super()}getStyle(){return{width:"100%",height:"500px",background:"",display:"inline-block"}}}let D=[{id:"1",name:"基本容器",selfProp:O,UI:B,params:[{type:"input",key:"input",props:{label:"input"},value:""},{type:"array",key:"array",props:{label:"array"},value:[]},{type:"object",key:"object",props:{label:"object"},value:{}},{type:"number",key:"number",props:{label:"number"},value:0},{type:"select",key:"select",props:{label:"select"},value:""},{type:"mulSelect",key:"mulSelect",props:{label:"mulSelect"},value:[]}]},{name:"选项卡",id:"2",selfProp:class extends O{constructor(){super(),this.opt={tab:["选项1"]}}},UI:class extends B{constructor(){super(),this.activeCard=""}filterChildren(e){return this.moduleIdList.find(t=>t.moduleId==e.moduleId&&this.activeCard==t.tab)}addModuleId(e){this.moduleIdList.push({moduleId:e,tab:this.activeCard})}removeModuleId(e){this.moduleIdList=this.moduleIdList.filter(t=>t.moduleId!=e)}},params:[{type:"array",key:"tab",props:{label:"选项卡"}}]},{name:"弹窗",id:"3",selfProp:O,UI:B}],U=[{name:"按钮",id:"4",selfProp:class extends E{constructor(){super(),this.opt={label:"提取数据"}}},UI:A,params:[{type:"input",key:"label",props:{label:"描述"}}]},{name:"输入框",id:"5",selfProp:class extends E{constructor(){super(),this.opt={value:"测试",prepend:""}}},UI:A,params:[{type:"input",key:"value",props:{label:"值"}},{type:"input",key:"prepend",props:{label:"前缀"}}]},{name:"数字输入框",id:"6",selfProp:class extends E{constructor(){super(),this.opt={value:0,label:""}}},UI:A,params:[{type:"input",key:"value",props:{label:"值"}},{type:"input",key:"label",props:{label:"标签"}}]},{name:"日期选择",id:"7",selfProp:class extends E{constructor(){super(),this.opt={value:0,placeholder:"",type:"datetime"}}},UI:A,params:[{type:"input",key:"value",props:{label:"值"}},{type:"input",key:"placeholder",props:{label:"placeholder"}},{type:"select",key:"type",props:{label:"日期类型",optionsArray:[{key:"year",value:"year"},{key:"month",value:"month"},{key:"date",value:"date"},{key:"week",value:"week"},{key:"datetime",value:"datetime"},{key:"datetimerange",value:"datetimerange"},{key:"daterange",value:"daterange"}],configVisible:!1}}]},{name:"时间选择",id:"8",selfProp:class extends E{constructor(){super(),this.opt={year:2020,report:1}}},UI:A,params:[{type:"select",key:"year",props:{label:"日期类型",optionsArray:new Array(21).fill(2020).map((e,t)=>e-t).map(e=>({key:e,value:e})),configVisible:!1}},{type:"select",key:"report",props:{label:"日期类型",optionsArray:[{key:1,value:"年报"},{key:2,value:"三季"},{key:3,value:"中期"},{key:4,value:"一季"}],configVisible:!1}}]},{name:"下拉选择",id:"9",selfProp:class extends E{constructor(){super(),this.opt={value:""}}},UI:A,params:[{type:"select",key:"value",props:{label:"日期类型",optionsArray:[{key:1,value:"选项一"},{key:2,value:"选项二"},{key:3,value:"选项三"}],configVisible:!0}}]},{name:"多选框",id:"10",selfProp:class extends E{constructor(){super(),this.opt={value:"",label:"test"}}},UI:A,params:[{type:"boolean",key:"value"},{type:"input",key:"label"}]},{name:"多选框组",id:"11",selfProp:class extends E{constructor(){super(),this.opt={value:[]}}},UI:A,params:[{type:"mulSelect",key:"value",props:{optionsArray:[{key:1,value:"选项一"},{key:2,value:"选项二"},{key:3,value:"选项三"}],configVisible:!0}}]},{name:"单选框组",id:"12",selfProp:class extends E{constructor(){super(),this.opt={value:""}}},UI:A,params:[{type:"select",key:"value",props:{label:"日期类型",optionsArray:[{key:1,value:"选项一"},{key:2,value:"选项二"},{key:3,value:"选项三"}],configVisible:!0}}]},{name:"下拉框",id:"13",selfProp:class extends E{constructor(){super(),this.opt={value:""}}},UI:A,params:[{type:"mulSelect",key:"value",props:{optionsArray:[{key:1,value:"选项一"},{key:2,value:"选项二"},{key:3,value:"选项三"}],configVisible:!0}}]}],j=[{name:"柱状折现图",id:"15",selfProp:M,UI:L},{name:"饼图",id:"16",selfProp:M,UI:L},{name:"表格",id:"17",selfProp:M,UI:L,params:[{type:"tableDataConfig",key:"config"}]},{name:"嵌入式页面",id:"18",selfProp:class extends M{constructor(){super(),this.opt={src:""}}},UI:L,params:[{type:"input",key:"src"}]}],W=[],F=[],z=[];U.forEach(e=>{W.push(e)}),D.forEach(e=>{F.push(e)}),j.forEach(e=>{z.push(e)});let H=e=>{let t=new e.UI;t.typeId=e.id,t.setSelfProp(new e.selfProp);var i=t.selfProp.getStyle();for(let[e,r]of Object.entries(i))t.style[e]=r;return t.selfProp.setParam(e.params),t},K=null,$=e=>{K=e},N=()=>{K=null};let G=new class{constructor(){this.active=void 0,this.isRelative=!0,this.borderColor="#bdbdbd"}setActive(e){this.active=e}deleteActive(){this.active&&Y.unCombi(this.active.moduleId)}},X=e=>{G.setActive(e)},Y=new R;Y.canDrag=!1,Y.target.style.width="100%",Y.target.style.height="100%",Y.target.style.overflow="auto";let q=new class extends class{constructor(){this.storage={}}get(e){return this.storage[e]}set(e,t){this.storage[e]=t}remove(e){this.storage[e]=void 0}clear(){this.storage={}}}{constructor(){super(),this.storage=localStorage}get(e){let t=this.storage.getItem(e);t&&(t=decodeURIComponent(t));try{t=JSON.parse(t)}catch(e){}return"undefined"==t&&(t=void 0),t}set(e,t){"object"==typeof t&&(t=JSON.stringify(t));try{t=encodeURIComponent(t)}catch(e){}this.storage.setItem(e,t)}remove(e){this.storage.setItem(e,void 0)}clear(){this.storage.clear()}},J=()=>{q.set("saveedit",Y.getValue())},Z=()=>{var e=q.get("saveedit");Q(Y,e)},Q=(e,t)=>{e.moduleId=t.moduleId,e.canDrag=t.canDrag;let i=U.concat(D,j).find(e=>e.id==t.target.typeId),r=i||{name:"外层",selfProp:T,UI:B,params:[]};return e.target=new r.UI,e.target.editable=t.target.editable,e.target.id=t.target.id,e.target.typeId=t.target.typeId,e.target.insertable=t.target.insertable,e.target.moduleIdList=t.target.moduleIdList,(t.target.eventBind.inValue||[]).forEach(t=>{e.target.eventBind.addIn().setValue(t)}),(t.target.eventBind.outValue||[]).forEach(t=>{e.target.eventBind.addOut().setValue(t)}),e.target.eventBind.save(),e.target.selfProp=new r.selfProp,e.target.selfProp.setParam(r.params||[]),e.target.selfProp.setValue(t.target.selfProp.value),e.target.style.setValue(t.target.style.value),e.children=t.children.map(e=>Q(new R,e)),e},_=()=>{var e=m.getList().map(e=>e.opt),t=g.getList().map(e=>e.opt);q.set("saveConfig",{apiValue:e,eventValue:t})},ee=()=>{var e=q.get("saveConfig");m.clear(),g.clear(),((e=e||{apiValue:[],eventValue:[]}).apiValue||[]).forEach(e=>{v().setValue(e)}),(e.eventValue||[]).forEach(e=>{y().setValue(e)})},te=new R;var ie=q.get("saveedit");ie&&Q(te,ie);class re{constructor(e){this.key=e.key||"",this.props={label:"",required:"",data:[],disabled:!1,show:!0,placeholder:"",...e.props},this.valid=e.valid||[],this.type=e.type||"",this.value=void 0===e.value?"":e.value,this.children=e.children||[],this.rawData=e,this.rawComponents=e.rawComponents||[],this.canRender=!1}dataFind(e){var t=null;return(this.props.data||[]).forEach(i=>{void 0!==i[e]&&(t=i[e])}),t}setValue(e){var t=this.value;this.value=e,t!=this.value&&this.onChange({val:this.value,oldVal:t})}getKey(){return this.key}getValue(){return this.value}hasChange(){return!(""==this.getValue())}onChange({val:e,oldVal:t}){return{val:e,oldVal:t}}getValid(){var e={success:!0,message:"",type:"success"};return new Promise(t=>{this.key?(this.props.required&&!this.hasChange()&&(e={success:!1,message:this.props.label||"",type:"requiredEmpty"}),t(e)):t(e)})}setDisabled(e=!1){return this.props.disabled=e,this.props.disabled}getKeyValue(){return{key:this.getKey(),value:this.getValue(),children:this.children.map(e=>e.getKeyValue())}}setKeyValue({key:e,value:t,children:i}){""!=this.getKey()&&this.getKey()==e&&(this.setValue(t),i.forEach(e=>{var t=this.children.find(t=>e.key==t.getKey());t&&t.setKeyValue(e)}))}getAllItems(){return this.children.map(e=>e.getAllItems()).concat(this)}getCanRender(){return this.canRender||0==this.rawComponents.length}render(...e){}}class se{constructor(e){}mounted(){}}class ae extends re{constructor(e){super(e),this.renderComponent=void 0,this.lifeCycle=new se(e.props?e.props.lifeCycle:{})}render(e,t){return this.getCanRender()?this.renderInstance(e,t):e.createElement()}renderInstance(e,t){return e.createElement(this.renderComponent||"div",{...e.context,props:{target:this,...t}},[e.vueRoot.$slots.default])}}class le extends class{constructor(e=[],t){this.options=t||{needValidHidden:!1},this.needValidHidden=this.options.needValidHidden,this.rawList=e,this.list=[],this.templateList=[],this.componentHasRendered=new l,this.classTarget=new.target,this.reset()}setList(e){this.rawList=e,this.list=[],this.reset()}reset(){this.list=this.rawList.map(e=>{var t=this.convert(e);return t.children&&(t.children=new this.classTarget(t.children,this.options).list),t},[])}addTemplate({key:e,value:t}){var i=this.getValue(),r=this.templateList.find(t=>t.key==e);r?r.value=t:this.templateList.push({key:e,value:t}),this.reset(),this.setValue(i)}removeTemplate(e){var t=this.getValue();this.templateList=this.templateList.filter(t=>t.key!==e),this.reset(),this.setValue(t)}clearTemplate(){var e=this.getValue();this.templateList=[],this.reset(),this.setValue(e)}getTemplate(){return this.templateList}convert(e){var t=this.templateList.find(t=>t.key==e.type);return t&&t.value?new t.value(e):this.convertSinlgeUI(e)}convertSinlgeUI(e){return new re(e)}getValid(){var e=this.getAllItems().filter(e=>this.needValidHidden||0!=e.props.show).map(e=>e.getValid(),[]);return new Promise(t=>{Promise.all(e).then(e=>{var i=e.filter(e=>!e.success);t({success:0==i.length,message:i.length>0?i[0].message:"",type:i.length>0?i[0].type:"success"})})})}setValue(e){e.forEach(e=>{var t=this.list.find(t=>e.key==t.getKey());t&&t.setKeyValue(e)})}getValue(){return this.list.map(e=>e.getKeyValue())}getAllItems(){return this.list.reduce((e,t)=>e=e.concat(t),[])}loadComponents(){return new Promise(e=>{var t=this.getNeedRender();Promise.all(t.map(e=>this.handleComponentKey(e))).then(()=>{e()})})}getNeedRender(){return Array.from(new Set(this.getAllItems().reduce((e,t)=>e=e.concat(t.getCanRender()?[]:t.rawComponents),[])))}load(){return this.loadComponents().then(()=>{var e=this.componentHasRendered.get("key").map(e=>e.data);this.getAllItems().forEach(t=>{!1===t.canRender&&(t.canRender=t.rawComponents.map(t=>e.includes(t)).reduce((e,t)=>e&&t,!0))})})}render(){return this.getAllItems().map(e=>e.render())}handleComponentKey(e){return new Promise(t=>{this.componentHasRendered.add({name:"key",data:e}),t()})}}{constructor(e=[],t){super(e,t)}convertSinlgeUI(e){return new ae(e)}handleComponentKey(e){return new Promise(t=>{this.componentHasRendered.add({name:"key",data:e}),t()})}getRenderList(e){return this.getAllItems().map(t=>t.render(e))}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function oe(e,t,i,r){var s,a=arguments.length,l=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(a<3?s(l):a>3?s(t,i,l):s(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l}let ne=class extends s{};oe([i()],ne.prototype,"target",void 0),ne=oe([r({template:"<div class='inputVue' v-show='target.props.show'> <el-input v-model=\"target.value\" :disabled='target.props.disabled' clearable :type='target.props.inputType'> <template slot='append' v-if='target.props.append'>{{target.props.append}}</template> <template slot=\"prepend\" v-if='target.props.label'>{{target.props.label}}</template> </el-input> </div>"})],ne);var pe=ne;let de=class extends s{};oe([i()],de.prototype,"target",void 0),de=oe([r({template:'<div class=\'arrayVue\' v-show=\'target.props.show\'> <div>{{target.props.label}}</div> <el-row> <el-col v-for="(item,index) in target.value" :key="index"> <el-input v-model="item.value" > <template slot="append" > <span @click="target.addCol()" class=\'el-icon-circle-plus-outline\'></span> <span v-if="index != 0" @click="target.delCol(index)" class=\'el-icon-remove-outline\'></span> </template> </el-input> </el-col> </el-row> </div>'})],de);var ue=de;let ce=class extends s{};oe([i()],ce.prototype,"target",void 0),ce=oe([r({template:"<div class='objectVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <el-row> <el-col v-for=\"(item,index) in target.props.objectArray\" :key=\"index\"> <el-col :span='10'> <el-input v-model=\"item.key\" > <template slot='prepend'>key</template> </el-input> </el-col> <el-col :span='10'> <el-input v-model=\"item.value\" > <template slot='prepend'>value</template> </el-input> </el-col> <el-col :span='4'> <span @click=\"target.addCol()\" class='el-icon-circle-plus-outline'></span> <span v-if=\"index != 0\" @click=\"target.delCol(index)\" class='el-icon-remove-outline'></span> </el-col> </el-col> </el-row> </div>"})],ce);var he=ce;let me=class extends s{};oe([i()],me.prototype,"target",void 0),me=oe([r({template:"<div class='mulSelectVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <div v-if='target.props.configVisible'> <span>选项:</span> <el-row> <el-col v-for=\"(item,index) in target.props.optionsArray\" :key=\"index\"> <el-col :span='10'> <el-input v-model=\"item.key\" > <template slot='prepend'>key</template> </el-input> </el-col> <el-col :span='10'> <el-input v-model=\"item.value\" > <template slot='prepend'>value</template> </el-input> </el-col> <el-col :span='4'> <span @click=\"target.addCol()\" class='el-icon-circle-plus-outline'></span> <span v-if=\"index != 0\" @click=\"target.delCol(index)\" class='el-icon-remove-outline'></span> </el-col> </el-col> </el-row> </div> <span v-if='target.props.configVisible'>结果:</span> <el-select v-model=\"target.value\" multiple filterable clearable> <el-option v-for=\"(item, index) in target.props.optionsArray\" :value=\"item.key\" :label='item.value' :key=\"index\"> </el-option> </el-select></div>"})],me);var ge=me;let ve=class extends s{};oe([i()],ve.prototype,"target",void 0),ve=oe([r({template:"<div class='selectVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <div v-if='target.props.configVisible'> <span>选项:</span> <el-row > <el-col v-for=\"(item,index) in target.props.optionsArray\" :key=\"index\"> <el-col :span='10'> <el-input v-model=\"item.key\" > <template slot='prepend'>key</template> </el-input> </el-col> <el-col :span='10'> <el-input v-model=\"item.value\" > <template slot='prepend'>value</template> </el-input> </el-col> <el-col :span='4'> <span @click=\"target.addCol()\" class='el-icon-circle-plus-outline'></span> <span v-if=\"index != 0\" @click=\"target.delCol(index)\" class='el-icon-remove-outline'></span> </el-col> </el-col> </el-row> </div> <span v-if='target.props.configVisible'>结果:</span> <el-select v-model=\"target.value\" filterable clearable> <el-option v-for=\"(item, index) in target.props.optionsArray\" :value=\"item.key\" :label='item.value' :key=\"index\"> </el-option> </el-select></div>"})],ve);var be=ve;let ye=class extends s{};oe([i()],ye.prototype,"target",void 0),ye=oe([r({template:"<div class='numberVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <el-input-number v-model=\"target.value\" :disabled='target.props.disabled' ></el-input-number></div>"})],ye);var ke=ye;let fe=class extends s{};oe([i()],fe.prototype,"target",void 0),fe=oe([r({template:"<div class='BooleanVueUI' v-show='target.props.show'> <el-checkbox v-model=\"target.value\">是否选中</el-checkbox> </div>"})],fe);var we=fe;let xe=class extends s{watchSimulate(e){this.target.simulate()}};oe([i()],xe.prototype,"target",void 0),oe([a("target.value")],xe.prototype,"watchSimulate",null),xe=oe([r({template:'<div class=\'SimulateVue\' v-show=\'target.props.show\'> <el-input type="textarea" :rows="5" placeholder="模拟框" v-model="target.value"> </el-input> <div>{{target.error}}</div> <div>{{target.simulateValueToString()}}</div> </div>'})],xe);var Ie=xe;e.use(t);class Ce extends ae{constructor(e){super(e),this.renderComponent=pe}}class Se extends ae{constructor(e){super(e),Array.isArray(this.value)||(this.value=[]),0==this.value.length&&this.addCol(),this.renderComponent=ue}addCol(){this.value.push({value:""})}delCol(e){this.value.splice(e,1)}getValue(){return this.value.map(e=>e.value)}setValue(e){this.value=(e||[]).map(e=>({value:e})),Array.isArray(this.value)||(this.value=[]),0==this.value.length&&this.addCol()}}class Ve extends ae{constructor(e){super(e),this.props.objectArray=this.props.objectArray||[],this.setValue(this.value||{}),0==this.props.objectArray.length&&this.addCol(),this.renderComponent=he}addCol(){this.props.objectArray.push({key:"",value:""})}delCol(e){this.props.objectArray.splice(e,1)}getValue(){return this.props.objectArray.reduce((e,t)=>(e[t.key]=t.value,e),{})}setValue(e){this.value=e||{},this.props.objectArray=[];for(let[e,t]of Object.entries(this.value))this.props.objectArray.push({key:e,value:t});0==this.props.objectArray.length&&this.addCol()}}class Pe extends ae{constructor(e){super(e),this.props.configVisible=this.props.configVisible||[],this.props.optionsArray=this.props.optionsArray||[],this.setValue(this.value||""),0==this.props.optionsArray.length&&this.addCol(),this.renderComponent=ge}addCol(){this.props.optionsArray.push({key:"",value:""})}delCol(e){this.props.optionsArray.splice(e,1)}}class Te extends ae{constructor(e){super(e),this.props.configVisible=this.props.configVisible||[],this.props.optionsArray=this.props.optionsArray||[],this.setValue(this.value||[]),0==this.props.optionsArray.length&&this.addCol(),this.renderComponent=be}addCol(){this.props.optionsArray.push({key:"",value:""})}delCol(e){this.props.optionsArray.splice(e,1)}}class Be extends ae{constructor(e){super(e),this.renderComponent=ke}}class Ae extends ae{constructor(e){super(e),this.value=!!this.value,this.renderComponent=we}}class Le extends ae{constructor(e){super(e),this.simulateValue="",this.error="",this.simulate(),this.renderComponent=Ie}getValue(){return this.value}setValue(e){var t=this.value;this.value=e,t!=this.value&&this.onChange({val:this.value,oldVal:t}),this.simulate()}simulate(){this.simulateValue=this.value,this.error="";try{this.simulateValue=JSON.parse(this.value)}catch(e){this.error=e}}simulateValueToString(){return"object"==typeof this.simulateValue?JSON.stringify(this.simulateValue):this.simulateValue}}let Re=class extends s{get options(){return this.target.apiList.getList().map(e=>({key:e.opt.id,value:"api:"+e.opt.name})).concat(this.target.eventList.getList().map(e=>({key:e.opt.id,value:`${e.opt.type}:${e.opt.name}`})))}};oe([i()],Re.prototype,"target",void 0),Re=oe([r({template:'<div class=\'eventListVue\'> <div>{{target.props.label}}</div> <el-row> <el-col> <el-select v-model="target.value" filterable> <el-option v-for="(item, index) in options" :value="item.key" :label=\'item.value\' :key="index"> </el-option> </el-select> </el-col> </el-row> </div>'})],Re);var Oe=Re;let Ee=class extends s{mounted(){console.log(this.target.ui)}};oe([i()],Ee.prototype,"target",void 0),Ee=oe([r({template:"<div class='ContainerVue'> <slot></slot> </div>"})],Ee);var Me=Ee;let De=class extends s{constructor(){super(...arguments),this.tabs=[],this.activeTab=""}mounted(){console.log(this.target.ui),console.log(this.target.ui.selfProp.opt),this.resetTabs()}resetTabs(e=this.target.ui.selfProp.opt){this.tabs=e.tab.map((e,t)=>({key:t.toString(),value:e.toString()})),this.target.ui.activeCard=this.target.ui.activeCard||this.tabs[0].key||""}watchTab(e){this.resetTabs(e)}};oe([i()],De.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],De.prototype,"watchTab",null),De=oe([r({template:'<div class=\'CardContainerVue\'> <el-tabs v-model="target.ui.activeCard" > <el-tab-pane v-for="(tab, index) in tabs" :key="index" :label="tab.value" :name="tab.key"> <slot></slot> </el-tab-pane> </el-tabs> </div>'})],De);var Ue=De;let je=class extends s{constructor(){super(...arguments),this.visible=!1,this.title=""}mounted(){console.log(this.target.ui)}};oe([i()],je.prototype,"target",void 0),je=oe([r({template:"<div class='DialogContainerVue'> <div class='DialogContainerVue-block' v-if='!target.isCompiler'> <slot></slot> </div> <el-dialog :visible.sync='visible' :append-to-body=\"true\" :title=\"title\" v-if='target.isCompiler'> <slot></slot> </el-dialog> </div>"})],je);var We=je;let Fe=class extends s{constructor(){super(...arguments),this.label=""}mounted(){console.log(this.target.ui),console.log(this.target.ui.selfProp.opt),this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.label=e.label||""}watchTab(e){this.resetOpt(e)}};oe([i()],Fe.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],Fe.prototype,"watchTab",null),Fe=oe([r({template:"<div class='ButtonVue'> <el-button >{{label}}</el-button> </div>"})],Fe);var ze=Fe;let He=class extends s{constructor(){super(...arguments),this.value="",this.prepend=""}mounted(){console.log(this.target.ui),console.log(this.target.ui.selfProp.opt),this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.value=e.value||"",this.prepend=e.prepend||""}watchTab(e){this.resetOpt(e)}};oe([i()],He.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],He.prototype,"watchTab",null),He=oe([r({template:"<div class='InputVue'> <el-input v-model='value'> <template slot='prepend' v-if=\"prepend\"> {{prepend}} </template> </el-input> </div>"})],He);var Ke=He;let $e=class extends s{constructor(){super(...arguments),this.value="",this.label=""}mounted(){this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.value=e.value||"",this.label=e.label||""}watchTab(e){this.resetOpt(e)}};oe([i()],$e.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],$e.prototype,"watchTab",null),$e=oe([r({template:"<div class='NumberVue'> <el-row> <el-col :span='label ? 4 : 0'>{{label}}</el-col> <el-col :span='label ? 20 : 24'> <el-input-number v-model=\"value\" :label='label'></el-input-number> </el-col> </el-row> </div>"})],$e);var Ne=$e;let Ge=class extends s{constructor(){super(...arguments),this.value="",this.type="datetime",this.placeholder=""}mounted(){this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.value=e.value||"",this.type=e.type||"datetime",this.placeholder=e.placeholder||""}watchTab(e){this.resetOpt(e)}};oe([i()],Ge.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],Ge.prototype,"watchTab",null),Ge=oe([r({template:'<div class=\'TimePickerVue\'> <el-date-picker v-model="value" :type="type" :placeholder="placeholder"> </el-date-picker> </div>'})],Ge);var Xe=Ge;let Ye=class extends s{constructor(){super(...arguments),this.year="2020",this.report=1}mounted(){this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.year=e.year||"2020",this.report=e.report||1}watchTab(e){this.resetOpt(e)}};oe([i()],Ye.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],Ye.prototype,"watchTab",null),Ye=oe([r({template:'<div class=\'TimeGroupVue\'> <el-select v-model="year" filterable> <el-option v-for="(item, index) in target.year" :value="item.key" :label=\'item.value\' :key="index"> </el-option> </el-select> <el-select v-model="report" filterable> <el-option v-for="(item, index) in target.report" :value="item.key" :label=\'item.value\' :key="index"> </el-option> </el-select> </div>'})],Ye);var qe=Ye;let Je=class extends s{constructor(){super(...arguments),this.value="",this.optionsArray=[]}mounted(){console.log(this.target.ui.selfProp),this.resetSelfProp()}resetSelfProp(e=this.target.ui.selfProp){this.value=e.opt.value||"",this.optionsArray=e.params.find(e=>"value"==e.key).props.optionsArray}watchTab(e){this.resetSelfProp(e)}};oe([i()],Je.prototype,"target",void 0),oe([a("target.ui.selfProp",{deep:!0})],Je.prototype,"watchTab",null),Je=oe([r({template:'<div class=\'SelectVue\'> <el-select v-model="value" filterable> <el-option v-for="(item, index) in optionsArray" :value="item.key" :label=\'item.value\' :key="index"> </el-option> </el-select> </div>'})],Je);var Ze=Je;let Qe=class extends s{constructor(){super(...arguments),this.label="",this.value=""}mounted(){this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.value=e.value||"",this.label=e.label||""}watchTab(e){this.resetOpt(e)}};oe([i()],Qe.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],Qe.prototype,"watchTab",null),Qe=oe([r({template:"<div class='CheckBoxVueUI'> <el-checkbox v-model=\"value\">{{label}}</el-checkbox> </div>"})],Qe);var _e=Qe;let et=class extends s{constructor(){super(...arguments),this.value=[],this.optionsArray=[]}mounted(){console.log(this.target.ui.selfProp),this.resetSelfProp()}resetSelfProp(e=this.target.ui.selfProp){this.value=e.opt.value||[],this.optionsArray=e.params.find(e=>"value"==e.key).props.optionsArray}watchTab(e){this.resetSelfProp(e)}};oe([i()],et.prototype,"target",void 0),oe([a("target.ui.selfProp",{deep:!0})],et.prototype,"watchTab",null),et=oe([r({template:'<div class=\'CheckBoxGroupVueUI\'> <el-checkbox-group v-model="value"> <el-checkbox v-for="(item, index) in optionsArray" :key=\'index\' :label="item.key"> {{item.value}} </el-checkbox> </el-checkbox-group> </div>'})],et);var tt=et;let it=class extends s{constructor(){super(...arguments),this.value="",this.optionsArray=[]}mounted(){console.log(this.target.ui.selfProp),this.resetSelfProp()}resetSelfProp(e=this.target.ui.selfProp){this.value=e.opt.value||"",this.optionsArray=e.params.find(e=>"value"==e.key).props.optionsArray}watchTab(e){this.resetSelfProp(e)}};oe([i()],it.prototype,"target",void 0),oe([a("target.ui.selfProp",{deep:!0})],it.prototype,"watchTab",null),it=oe([r({template:'<div class=\'RadioVueUI\'> <el-radio-group v-model="value" > <el-radio v-for="(item, index) in optionsArray" :label=\'item.key\' :key="index"> {{item.value}} </el-radio> </el-radio-group> </div>'})],it);var rt=it;let st=class extends s{constructor(){super(...arguments),this.value=[],this.optionsArray=[]}mounted(){console.log(this.target.ui.selfProp),this.resetSelfProp()}resetSelfProp(e=this.target.ui.selfProp){this.value=e.opt.value||[],this.optionsArray=e.params.find(e=>"value"==e.key).props.optionsArray}watchTab(e){this.resetSelfProp(e)}};oe([i()],st.prototype,"target",void 0),oe([a("target.ui.selfProp",{deep:!0})],st.prototype,"watchTab",null),st=oe([r({template:'<div class=\'MulSelectVueUI\'> <el-select v-model="value" multiple filterable clearable> <el-option v-for="(item, index) in optionsArray" :value="item.key" :label=\'item.value\' :key="index"> </el-option> </el-select> </div>'})],st);var at=st;let lt=class extends s{constructor(){super(...arguments),this.src=""}mounted(){console.log(this.target.ui),console.log(this.target.ui.selfProp.opt),this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.src=e.src||""}watchTab(e){this.resetOpt(e)}};oe([i()],lt.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],lt.prototype,"watchTab",null),lt=oe([r({template:"<div class='IframeVueUI'> <div class='IframeVueUI-block' v-if='!target.isCompiler'></div> <iframe v-if='target.isCompiler' :src=\"src\" frameborder=\"0\"></iframe> </div>"})],lt);var ot=lt;let nt=class extends s{render(e,t){return this.tableCol.render(e,t,this.row,this.propkey)}};oe([i()],nt.prototype,"tableCol",void 0),oe([i()],nt.prototype,"row",void 0),oe([i()],nt.prototype,"propkey",void 0),nt=oe([r({template:'<div class=\'TableVueUI\'> <el-table class="list-table" size="mini" :data="target.mergetList" v-loading="target.loading" fit stripe :show-header="target.mergeShowHeader" style="width: 99.9%" > <template v-for="(item, index) in target.mergeCols"> <el-table-column :key="index" :type="item.type" :label="item.label" :prop="item.prop" :sortable="item.sortable" :class-name="item.className" :width="item.width" :min-width="item.minWidth" :fixed="item.fixed" :show-overflow-tooltip="item.showOverflowTooltip" > <template slot-scope="scope"> <TabelColSlot :tableCol="item" :propkey="target.getTableKey(scope, item)" :row="target.getTableRow(scope, item)"></TabelColSlot> </template> </el-table-column> </template> </el-table> </div>'})],nt);let pt=class extends s{constructor(){super(...arguments),this.value="",this.prepend=""}mounted(){console.log(this.target),this.resetOpt()}resetOpt(e=this.target.ui.selfProp.opt){this.value=e.value||"",this.prepend=e.prepend||""}watchTab(e){this.resetOpt(e)}};oe([i()],pt.prototype,"target",void 0),oe([a("target.ui.selfProp.opt")],pt.prototype,"watchTab",null),pt=oe([r({components:{TabelColSlot:nt}})],pt);var dt=pt;let ut=class extends s{constructor(){super(...arguments),this.activeName="column",this.typeArray=[{key:"",value:"默认"},{key:"selection",value:"selection"},{key:"index",value:"index"},{key:"expand",value:"expand"}]}mounted(){console.log(this.target)}};oe([i()],ut.prototype,"target",void 0),ut=oe([r({template:'<div class=\'TableVueUI\'> <div></div> <el-tabs v-model="activeName"> <el-tab-pane label="column 管理" name="column"> <el-row v-for="(item, index) in target.cols" :key="index"> <el-col> type: <el-select v-model="item.type" filterable> <el-option v-for="(item, index) in typeArray" :value="item.key" :label=\'item.value\' :key="index"> </el-option> </el-select> </el-col> <el-col> <el-input v-model="item.label"> <template slot=\'prepend\'> label </template> </el-input> </el-col> <el-col> <el-input v-model="item.prop"> <template slot=\'prepend\'> prop </template> </el-input> </el-col> <el-col> <el-checkbox v-model="item.sortable">sortable</el-checkbox> </el-col> <el-col> <el-input v-model="item.className"> <template slot=\'prepend\'> className </template> </el-input> </el-col> <el-col> <el-input v-model="item.width"> <template slot=\'prepend\'> width </template> </el-input> </el-col> <el-col> <el-input v-model="item.minWidth"> <template slot=\'prepend\'> minWidth </template> </el-input> </el-col> <el-col> <el-checkbox v-model="item.fixed">fixed</el-checkbox> </el-col> <el-col> <el-checkbox v-model="item.showOverflowTooltip">showOverflowTooltip</el-checkbox> </el-col> <span @click="target.addCol()" class=\'el-icon-circle-plus-outline\'></span> <span v-if="index != 0" @click="target.delCol(index)" class=\'el-icon-remove-outline\'></span> </el-row> </el-tab-pane> <el-tab-pane label="tableData 管理" name="tableData"> <slot></slot> </el-tab-pane> </el-tabs> </div>'})],ut);var ct=ut;e.use(t);class ht extends ae{constructor(e){super(e),this.apiList=m,this.eventList=g}renderInstance(e){return e.createElement(Oe,{props:{target:this}},[e.vueRoot.$slots.default])}}class mt extends ae{constructor(e){super(e),this.ui=this.props.ui,this.isCompiler=this.props.isCompiler}renderInstance(e){return e.createElement("div",{props:{target:this}},[e.vueRoot.$slots.default])}}class gt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(Me,{props:{target:this}},[e.vueRoot.$slots.default])}}class vt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(Ue,{props:{target:this}},[e.vueRoot.$slots.default])}}class bt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(We,{props:{target:this}},[e.vueRoot.$slots.default])}}class yt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(ze,{props:{target:this}},[e.vueRoot.$slots.default])}}class kt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(Ke,{props:{target:this}},[e.vueRoot.$slots.default])}}class ft extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(Ne,{props:{target:this}},[e.vueRoot.$slots.default])}}class wt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(Xe,{props:{target:this}},[e.vueRoot.$slots.default])}}class xt extends mt{constructor(e){super(e),this.year=new Array(21).fill(2020).map((e,t)=>e-t).map(e=>({key:e,value:e})),this.report=[{key:1,value:"年报"},{key:2,value:"三季"},{key:3,value:"中期"},{key:4,value:"一季"}]}renderInstance(e){return e.createElement(qe,{props:{target:this}},[e.vueRoot.$slots.default])}}class It extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(Ze,{props:{target:this}},[e.vueRoot.$slots.default])}}class Ct extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(_e,{props:{target:this}},[e.vueRoot.$slots.default])}}class St extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(tt,{props:{target:this}},[e.vueRoot.$slots.default])}}class Vt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(rt,{props:{target:this}},[e.vueRoot.$slots.default])}}class Pt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(at,{props:{target:this}},[e.vueRoot.$slots.default])}}class Tt extends mt{constructor(e){super(e)}renderInstance(e){return e.createElement(ot,{props:{target:this}},[e.vueRoot.$slots.default])}}class Bt{constructor(e){this.prop=e.prop||"",this.type=e.type||"",this.label=e.label||"",this.sortable=e.sortable||!1,this.className=e.className||"",this.width=e.width||"",this.minWidth=e.minWidth||"100px",this.fixed=e.fixed||!1,this.convert=e.convert||!1,this.showOverflowTooltip=e.showOverflowTooltip||!1,this.children=(e.children||[]).map(e=>new Bt(e))}render(e,t,i,r=this.prop){return e("span",{},this.convert?[this.convert(e,t,this,i)]:[i[r]])}}class At extends mt{constructor(e){super(e),this.list=[],this.loading=!1,this.cols=[],this.direction="vertical",this.showHeader=!0,this.mergetList=[],this.mergeCols=[],this.mergeShowHeader=!1,this.setData()}setData(){this.cols.push(new Bt({label:"test",prop:"test"})),this.cols.push(new Bt({label:"aaaaa",prop:"test2"})),this.list=[{test:"a",test2:"v"},{test:"b",test2:"q"}],this.merge()}merge(){"vertical"===this.direction?(this.mergeShowHeader=this.showHeader,this.mergetList=this.list.concat(),this.mergeCols=this.cols.concat()):(this.mergeShowHeader=!1,this.mergetList=this.cols.map(e=>({prop:e.prop})),this.mergeCols=[new Bt({prop:"homeTitle"})].concat(this.list.map((e,t)=>new Bt({prop:t.toString()}))))}getTableRow(e,t){if("vertical"===this.direction)return e.row;if("homeTitle"==t.prop){var i=this.cols.find(t=>t.prop==e.row.prop);return i?{[e.row.prop]:i.label}:{[e.row.prop]:""}}return this.list[t.prop]}getTableKey(e,t){return"vertical"===this.direction?t.prop:e.row.prop}renderInstance(e){return e.createElement(dt,{props:{target:this}},[e.vueRoot.$slots.default])}}class Lt extends ae{constructor(e){super(e),this.cols=[],this.data=[],this.simulate=new Le({}),this.check()}addCol(){this.cols.push(new Bt({}))}delCol(e){this.cols.splice(e,1)}check(){0==this.cols.length&&this.addCol()}getValue(){return this.value}setValue(e){var t=this.value;this.value=e,this.check(),t!=this.value&&this.onChange({val:this.value,oldVal:t})}renderInstance(e){return e.createElement(ct,{props:{target:this}},[e.vueRoot.$slots.default,this.simulate.render(e)])}}let Rt=[{type:"id",key:"id",props:{label:"id",show:!1}},{type:"input",key:"name",props:{label:"名称"}},{type:"select",key:"config",props:{label:"名称",optionsArray:[{key:"get",value:"get"},{key:"post",value:"post"},{key:"postform",value:"postform"},{key:"postjson",value:"postjson"},{key:"postfile",value:"postfile"},{key:"auto",value:"auto"}],configVisible:!1}},{type:"object",key:"getParam",props:{label:"get参数"}},{type:"object",key:"postParam",props:{label:"post参数"}}],Ot=[{type:"id",key:"id",props:{label:"id",show:!1}},{type:"input",key:"name",props:{label:"名称"}},{type:"select",key:"type",props:{label:"事件类型",optionsArray:[{key:"EventDispatcher",value:"EventDispatcher"},{key:"ObserverSubject",value:"ObserverSubject"}],configVisible:!1}}],Et=[{type:"eventList",key:"tid",props:{label:"id"}},{type:"select",key:"key",props:{label:"事件类型",optionsArray:u.map(e=>({key:e,value:e})),configVisible:!1}}],Mt=[{type:"eventList",key:"tid",props:{label:"id"}}];class Dt{constructor(){this.uiList=new le,this.uiList.addTemplate({key:"",value:ae}),this.uiList.addTemplate({key:"input",value:Ce}),this.uiList.addTemplate({key:"array",value:Se}),this.uiList.addTemplate({key:"object",value:Ve}),this.uiList.addTemplate({key:"mulSelect",value:Pe}),this.uiList.addTemplate({key:"select",value:Te}),this.uiList.addTemplate({key:"number",value:Be}),this.uiList.addTemplate({key:"boolean",value:Ae})}add({key:e,value:t}){this.uiList.getTemplate().find(t=>t.key==e)||this.uiList.addTemplate({key:e,value:t})}remove(e){this.uiList.removeTemplate(e)}generate(e){return this.uiList.setList(e),this.uiList.list}render(e){return this.uiList.getRenderList(e)}getValue(){return this.uiList.getValue()}}class Ut extends Dt{constructor(){super(),this.isCompiler=!1,this.uiList.clearTemplate(),this.add({key:"1",value:gt}),this.add({key:"2",value:vt}),this.add({key:"3",value:bt}),this.add({key:"4",value:yt}),this.add({key:"5",value:kt}),this.add({key:"6",value:ft}),this.add({key:"7",value:wt}),this.add({key:"8",value:xt}),this.add({key:"9",value:It}),this.add({key:"10",value:Ct}),this.add({key:"11",value:St}),this.add({key:"12",value:Vt}),this.add({key:"13",value:Pt}),this.add({key:"17",value:At}),this.add({key:"18",value:Tt})}setTarget(e){this.uiList.setList([{key:e.id,props:{ui:e,isCompiler:this.isCompiler},type:e.typeId}])}}class jt extends Dt{constructor(){super(),this.generate(Rt)}}class Wt extends Dt{constructor(){super(),this.generate(Ot)}}class Ft extends Dt{constructor(){super(),this.add({key:"eventList",value:ht}),this.generate(Mt)}}class zt extends Dt{constructor(){super(),this.add({key:"eventList",value:ht}),this.generate(Et)}}class Ht extends Dt{constructor(){super(),this.add({key:"tableDataConfig",value:Lt}),this.generate(Et)}}export{jt as ApiGenerate,Wt as EventGenerate,Dt as GeneratePiece,Ft as InEventGenerate,Ut as ModuleGenrate,zt as OutEventGenerate,Ht as PropGeneratePiece,v as addApi,y as addEvent,m as apiList,W as basicModules,N as clearCurrentEl,te as compilerInstance,Y as containerModules,F as continerModules,K as currentEl,G as editorInstance,g as eventList,H as generateModule,z as mergeModules,b as removeApi,k as removeEvent,ee as restoreFromConfig,Z as restoreFromEdit,Q as restoreInstance,_ as saveFromConfig,J as saveFromEdit,$ as setCurrentModule,X as setEditorInstance};
