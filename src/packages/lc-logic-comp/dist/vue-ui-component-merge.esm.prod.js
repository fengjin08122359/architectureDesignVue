import e from"vue";import t from"element-ui";import{Prop as l,Component as s,Vue as r,Watch as a}from"vue-property-decorator";class i{constructor(e){}mounted(){}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function o(e,t,l,s){var r,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,l):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,l,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,l,i):r(t,l))||i);return a>3&&i&&Object.defineProperty(t,l,i),i}let p=class extends r{};o([l()],p.prototype,"target",void 0),p=o([s({template:"<div class='inputVue' v-show='target.props.show'> <el-input v-model=\"target.value\" :disabled='target.props.disabled' clearable :type='target.props.inputType'> <template slot='append' v-if='target.props.append'>{{target.props.append}}</template> <template slot=\"prepend\" v-if='target.props.label'>{{target.props.label}}</template> </el-input> </div>"})],p);let n=class extends r{};o([l()],n.prototype,"target",void 0),n=o([s({template:'<div class=\'arrayVue\' v-show=\'target.props.show\'> <div>{{target.props.label}}</div> <el-row> <el-col v-for="(item,index) in target.value" :key="index"> <el-input v-model="item.value" > <template slot="append" > <span @click="target.addCol()" class=\'el-icon-circle-plus-outline\'></span> <span v-if="index != 0" @click="target.delCol(index)" class=\'el-icon-remove-outline\'></span> </template> </el-input> </el-col> </el-row> </div>'})],n);let d=class extends r{};o([l()],d.prototype,"target",void 0),d=o([s({template:"<div class='objectVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <el-row> <el-col v-for=\"(item,index) in target.props.objectArray\" :key=\"index\"> <el-col :span='10'> <el-input v-model=\"item.key\" > <template slot='prepend'>key</template> </el-input> </el-col> <el-col :span='10'> <el-input v-model=\"item.value\" > <template slot='prepend'>value</template> </el-input> </el-col> <el-col :span='4'> <span @click=\"target.addCol()\" class='el-icon-circle-plus-outline'></span> <span v-if=\"index != 0\" @click=\"target.delCol(index)\" class='el-icon-remove-outline'></span> </el-col> </el-col> </el-row> </div>"})],d);let c=class extends r{};o([l()],c.prototype,"target",void 0),c=o([s({template:"<div class='mulSelectVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <div v-if='target.props.configVisible'> <span>选项:</span> <el-row> <el-col v-for=\"(item,index) in target.props.optionsArray\" :key=\"index\"> <el-col :span='10'> <el-input v-model=\"item.key\" > <template slot='prepend'>key</template> </el-input> </el-col> <el-col :span='10'> <el-input v-model=\"item.value\" > <template slot='prepend'>value</template> </el-input> </el-col> <el-col :span='4'> <span @click=\"target.addCol()\" class='el-icon-circle-plus-outline'></span> <span v-if=\"index != 0\" @click=\"target.delCol(index)\" class='el-icon-remove-outline'></span> </el-col> </el-col> </el-row> </div> <span v-if='target.props.configVisible'>结果:</span> <el-select v-model=\"target.value\" multiple filterable clearable> <el-option v-for=\"(item, index) in target.props.optionsArray\" :value=\"item.key\" :label='item.value' :key=\"index\"> </el-option> </el-select></div>"})],c);let u=class extends r{};o([l()],u.prototype,"target",void 0),u=o([s({template:"<div class='selectVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <div v-if='target.props.configVisible'> <span>选项:</span> <el-row > <el-col v-for=\"(item,index) in target.props.optionsArray\" :key=\"index\"> <el-col :span='10'> <el-input v-model=\"item.key\" > <template slot='prepend'>key</template> </el-input> </el-col> <el-col :span='10'> <el-input v-model=\"item.value\" > <template slot='prepend'>value</template> </el-input> </el-col> <el-col :span='4'> <span @click=\"target.addCol()\" class='el-icon-circle-plus-outline'></span> <span v-if=\"index != 0\" @click=\"target.delCol(index)\" class='el-icon-remove-outline'></span> </el-col> </el-col> </el-row> </div> <span v-if='target.props.configVisible'>结果:</span> <el-select v-model=\"target.value\" filterable clearable> <el-option v-for=\"(item, index) in target.props.optionsArray\" :value=\"item.key\" :label='item.value' :key=\"index\"> </el-option> </el-select></div>"})],u);let v=class extends r{};o([l()],v.prototype,"target",void 0),v=o([s({template:"<div class='numberVue' v-show='target.props.show'> <div>{{target.props.label}}</div> <el-input-number v-model=\"target.value\" :disabled='target.props.disabled' ></el-input-number></div>"})],v);let h=class extends r{};o([l()],h.prototype,"target",void 0),h=o([s({template:"<div class='BooleanVueUI' v-show='target.props.show'> <el-checkbox v-model=\"target.value\">是否选中</el-checkbox> </div>"})],h);let m=class extends r{watchSimulate(e){this.target.simulate()}};o([l()],m.prototype,"target",void 0),o([a("target.value")],m.prototype,"watchSimulate",null),m=o([s({template:'<div class=\'SimulateVue\' v-show=\'target.props.show\'> <el-input type="textarea" :rows="5" placeholder="模拟框" v-model="target.value"> </el-input> <div>{{target.error}}</div> <div>{{target.simulateValueToString()}}</div> </div>'})],m),e.use(t);let g=class extends r{constructor(){super(...arguments),this.template="<div></div>"}mounted(){this.target.lifeCycle&&this.target.lifeCycle.mounted(),this.resetProps(),this.template=this.target.renderTemplate}resetProps(e=this.target.props){}resetRenderTemplate(e=this.target.renderTemplate){this.needRender&&(this.template=e&&e||"")}render(e){return r.compile(this.template).render.apply(this,e)}watchTab(e){this.resetProps(e)}watchRenderTemplate(e){this.resetRenderTemplate(e)}};o([l()],g.prototype,"target",void 0),o([l()],g.prototype,"needRender",void 0),o([a("target.props")],g.prototype,"watchTab",null),o([a("target.renderTemplate")],g.prototype,"watchRenderTemplate",null),g=o([s],g);var y=g;let f=class extends y{constructor(){super(...arguments),this.title1="",this.title2="",this.template=""}resetProps(e=this.target.props){this.title1=e.title1,this.title2=e.title2}};f=o([s({template:""})],f);var b=f;class x extends class extends class extends class{constructor(e){this.key=e.key||"",this.props={label:"",required:"",data:[],disabled:!1,show:!0,placeholder:"",...e.props},this.valid=e.valid||[],this.type=e.type||"",this.value=void 0===e.value?"":e.value,this.children=e.children||[],this.rawData=e,this.rawComponents=e.rawComponents||[],this.canRender=!1}dataFind(e){var t=null;return(this.props.data||[]).forEach(l=>{void 0!==l[e]&&(t=l[e])}),t}setValue(e){var t=this.value;this.value=e,t!=this.value&&this.onChange({val:this.value,oldVal:t})}getKey(){return this.key}getValue(){return this.value}hasChange(){return!(""==this.getValue())}onChange({val:e,oldVal:t}){return{val:e,oldVal:t}}getValid(){var e={success:!0,message:"",type:"success"};return new Promise(t=>{this.key?(this.props.required&&!this.hasChange()&&(e={success:!1,message:this.props.label||"",type:"requiredEmpty"}),t(e)):t(e)})}setDisabled(e=!1){return this.props.disabled=e,this.props.disabled}getKeyValue(){return{key:this.getKey(),value:this.getValue(),children:this.children.map(e=>e.getKeyValue())}}setKeyValue({key:e,value:t,children:l}){""!=this.getKey()&&this.getKey()==e&&(this.setValue(t),l.forEach(e=>{var t=this.children.find(t=>e.key==t.getKey());t&&t.setKeyValue(e)}))}getAllItems(){return this.children.map(e=>e.getAllItems()).concat(this)}getCanRender(){return this.canRender||0==this.rawComponents.length}render(...e){}}{constructor(e){super(e),this.renderComponent=void 0,this.lifeCycle=new i(e.props?e.props.lifeCycle:{})}render(e,t){return this.getCanRender()?this.renderInstance(e,t):e.createElement()}renderInstance(e,t){return e.createElement(this.renderComponent||"div",{...e.context,props:{target:this,...t}},[e.vueRoot.$slots.default])}}{constructor(e){super(e),this.renderTemplate=e.props?e.props.renderTemplate:"<div></div>"}staticRender(e){return this.render(e,{needRender:!1})}normalRender(e){return this.render(e,{needRender:!0})}}{constructor(e){super(e),this.renderComponent=b,this.props.title1=e.props?e.props.title1:"",this.props.title2=e.props?e.props.title2:""}}let w={key:"example",props:{title1:"11",title2:"1222",renderTemplate:"<div class='DoubleTitle'><div>{{title1}}</div><div>{{title2}}</div></div>"},valid:[],type:"example"};class k{constructor(){this.view="",this.logic=x,this.db=w,this.getInstance()}getInstance(){this.instance=new this.logic(this.db)}renderInstance(e){return this.renderResult=this.instance?this.instance.normalRender(e):e.createElement("div",{...e.context,props:{target:this}},[e.vueRoot.$slots.default]),this.renderResult}renderStaticInstance(e){return console.log("renderStaticInstance"),this.renderResult=this.instance?this.instance.staticRender(e):e.createElement("div",{...e.context,props:{target:this}},[e.vueRoot.$slots.default]),this.renderResult}}export{k as CompMergeInstance};
